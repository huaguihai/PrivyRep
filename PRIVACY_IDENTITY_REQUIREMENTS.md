# 隐私身份与声誉系统 - 需求说明书

## 1. 项目概述

### 1.1 项目名称
**PrivyRep** - Privacy Identity & Reputation System

### 1.2 项目定位
基于 ZAMA FHEVM 的隐私保护身份验证与链上声誉系统，为 Web3 提供零知识身份证明和可累积的信用评分。

### 1.3 核心价值主张
- **隐私优先**：证明资格而不泄露具体信息
- **可累积声誉**：跨协议行为累积信用分数
- **可组合性**：其他 dApp 可以集成我们的验证服务
- **防女巫攻击**：通过声誉系统识别真实用户

---

## 2. 目标用户

### 2.1 主要用户群体
1. **个人用户**
   - 需要证明资格但保护隐私
   - 想要累积链上信用
   - 参与 DeFi、DAO、空投等活动

2. **dApp 开发者**
   - 需要验证用户资格（年龄、资产等）
   - 需要反女巫攻击机制
   - 需要白名单管理

3. **DAO 组织**
   - 需要成员资格验证
   - 需要贡献度评估
   - 需要治理权重计算

---

## 3. 功能需求

### 3.1 核心功能

#### 3.1.1 隐私身份证明（Privacy Proofs）
用户可以创建并证明以下属性，而不泄露具体值：

**资产证明**
- 证明 ETH 余额 > X
- 证明 ERC20 代币持有量 > Y
- 证明钱包总价值 > Z

**NFT 持有证明**
- 证明持有某个系列的 NFT
- 证明 NFT 持有数量 > N
- 证明持有稀有度 > R 的 NFT

**时间证明**
- 证明账户创建时间 > T
- 证明持有资产时间 > D

**交易活跃度证明**
- 证明交易次数 > M
- 证明与某协议交互次数 > K

#### 3.1.2 声誉积分系统（Reputation Score）
用户在链上的行为可以累积声誉分数：

**加分行为**
- 完成身份验证 (+10)
- 参与 DAO 治理投票 (+5)
- 成功完成交易 (+2)
- 持续活跃（每周） (+3)
- 贡献开源项目 (+15)

**减分行为**
- 恶意交易 (-20)
- 被举报 (-10)
- 长期不活跃 (-1/月)

**声誉等级**
- 0-100: 新手 (Novice)
- 101-500: 活跃用户 (Active)
- 501-1000: 可信用户 (Trusted)
- 1001-5000: 资深用户 (Veteran)
- 5001+: 传奇用户 (Legend)

#### 3.1.3 验证服务（Verification Service）
dApp 可以请求用户提供证明：

**验证请求流程**
1. dApp 创建验证请求（指定要求）
2. 用户提交加密证明
3. FHE 智能合约验证
4. 返回 Pass/Fail（不泄露具体值）

**支持的验证类型**
- 单一条件验证（资产 > X）
- 组合条件验证（资产 > X AND 账龄 > Y）
- 声誉分数验证（声誉 > Z）

#### 3.1.4 证书系统（Credentials）
用户完成验证后可以获得链上证书：

**证书类型**
- KYC 证书（年龄、国籍等）
- 资产证书（高净值用户）
- 活跃度证书（老用户）
- 专业证书（开发者、设计师等）

**证书特性**
- NFT 形式（SBT - Soulbound Token）
- 不可转让
- 有效期管理
- 可撤销

---

### 3.2 次要功能

#### 3.2.1 用户仪表板
- 查看个人声誉分数
- 查看已获得的证书
- 查看证明历史
- 管理隐私设置

#### 3.2.2 dApp 集成
- 集成 SDK/API
- Webhook 通知
- 验证记录查询

#### 3.2.3 治理系统
- 参数调整（加减分规则）
- 争议仲裁
- 协议升级

---

## 4. 非功能需求

### 4.1 性能要求
- 身份验证响应时间 < 30 秒
- 声誉计算实时性 < 1 分钟
- 支持并发验证 > 100 个/分钟

### 4.2 安全要求
- 用户数据完全加密（FHE）
- 智能合约经过审计
- 防止重放攻击
- 防止女巫攻击

### 4.3 隐私要求
- 零知识证明（只暴露 Pass/Fail）
- 链上数据不可逆向推导
- 用户完全控制自己的数据

### 4.4 可扩展性
- 模块化设计
- 支持新增验证类型
- 支持跨链（未来）

---

## 5. 用户故事

### 5.1 个人用户场景

**故事 1：证明资产但保护隐私**
```
作为一个高净值用户
我想参加某个 DeFi 协议的白名单
但我不想暴露我的具体资产
所以我使用 PrivyRep 证明我的资产 > 10 ETH
系统返回通过/失败，但不泄露我的实际余额
```

**故事 2：累积声誉获得特权**
```
作为一个活跃的 Web3 用户
我在多个协议上有良好记录
我希望这些记录能累积成声誉分数
从而获得更多空投、白名单资格
```

**故事 3：获得身份证书**
```
作为一个开发者
我想证明我的技术能力
所以我提交我的 GitHub 贡献记录
系统验证后给我颁发"开发者证书"
我可以用这个证书申请 DAO 的技术岗位
```

### 5.2 dApp 开发者场景

**故事 4：集成反女巫验证**
```
作为一个 dApp 开发者
我想发放空投但避免女巫攻击
所以我集成 PrivyRep 的声誉验证
只有声誉 > 100 的用户才能领取
```

**故事 5：创建白名单**
```
作为一个 NFT 项目方
我想为老用户提供白名单
所以我创建验证请求：账龄 > 1 年
用户提交证明后自动进入白名单
```

---

## 6. 与现有项目的差异

### 6.1 与 Zamabelief 的差异
| 维度 | Zamabelief | PrivyRep |
|------|------------|----------|
| 应用类型 | 预测市场 | 身份与声誉系统 |
| 核心功能 | 投票、质押、市场解决 | 身份验证、声誉累积 |
| 用户角色 | 投票者、市场创建者 | 普通用户、验证请求方 |
| 加密对象 | 投票金额、投票选项 | 资产余额、个人属性 |
| 业务逻辑 | 二元市场、Conviction | 门槛验证、分数累积 |

### 6.2 与其他隐私项目的差异
- **vs Sismo**: 我们专注声誉累积，他们专注零知识徽章
- **vs BrightID**: 我们是链上声誉，他们是社交图谱
- **vs Gitcoin Passport**: 我们支持更多验证类型且完全链上

---

## 7. 技术约束

### 7.1 区块链
- **主链**: Sepolia Testnet（开发阶段）
- **FHE**: ZAMA FHEVM
- **预言机**: ZAMA Oracle（用于解密）

### 7.2 前端
- **框架**: Vite + React + TypeScript
- **钱包**: RainbowKit + Wagmi
- **FHE SDK**: @zama-fhe/relayer-sdk

### 7.3 智能合约
- **语言**: Solidity
- **FHE 库**: fhevm-solidity
- **开发框架**: Hardhat

---

## 8. 里程碑

### Phase 1: MVP（4 周）
- 基础身份验证（资产证明）
- 简单声誉系统（+/- 分）
- 用户仪表板
- 1 个示例 dApp 集成

### Phase 2: 完整功能（4 周）
- 所有验证类型
- 证书系统（SBT）
- dApp SDK
- 治理系统

### Phase 3: 优化与推广（持续）
- 性能优化
- 安全审计
- 文档完善
- 社区建设

---

## 9. 成功指标

### 9.1 技术指标
- 验证准确率 > 99%
- 系统可用性 > 99.5%
- 平均响应时间 < 20 秒

### 9.2 业务指标
- 注册用户 > 1000（3 个月内）
- 集成 dApp > 10（6 个月内）
- 每日验证请求 > 100（6 个月内）

### 9.3 社区指标
- GitHub Stars > 100
- Discord 成员 > 500
- 社交媒体关注 > 1000

---

## 10. 风险与挑战

### 10.1 技术风险
- FHE 性能限制（计算时间长）
- Oracle 回调可能失败
- 智能合约漏洞

**缓解措施**：
- 优化算法，减少 FHE 计算
- 实现重试机制
- 代码审计 + Bug Bounty

### 10.2 业务风险
- 用户采用率低
- dApp 集成意愿不足
- 竞争对手出现

**缓解措施**：
- 早期用户激励计划
- 提供免费集成支持
- 持续创新，保持技术领先

---

**文档版本**: v1.0
**最后更新**: 2025-10-26
**作者**: PrivyRep Team
